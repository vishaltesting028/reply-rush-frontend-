"use strict";(()=>{var e={};e.id=4850,e.ids=[4850,660],e.modules={1323:(e,s)=>{Object.defineProperty(s,"l",{enumerable:!0,get:function(){return function e(s,t){return t in s?s[t]:"then"in s&&"function"==typeof s.then?s.then(s=>e(s,t)):"function"==typeof s&&"default"===t?s:void 0}}})},9133:(e,s,t)=>{t.a(e,async(e,a)=>{try{t.r(s),t.d(s,{config:()=>j,default:()=>u,getServerSideProps:()=>p,getStaticPaths:()=>g,getStaticProps:()=>h,reportWebVitals:()=>f,routeModule:()=>P,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>w,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>N,unstable_getStaticProps:()=>b});var r=t(7093),n=t(5244),l=t(1323),i=t(1682),c=t.n(i),d=t(8141),o=t.n(d),m=t(3777),x=e([m]);m=(x.then?(await x)():x)[0];let u=(0,l.l)(m,"default"),h=(0,l.l)(m,"getStaticProps"),g=(0,l.l)(m,"getStaticPaths"),p=(0,l.l)(m,"getServerSideProps"),j=(0,l.l)(m,"config"),f=(0,l.l)(m,"reportWebVitals"),b=(0,l.l)(m,"unstable_getStaticProps"),N=(0,l.l)(m,"unstable_getStaticPaths"),v=(0,l.l)(m,"unstable_getStaticParams"),y=(0,l.l)(m,"unstable_getServerProps"),w=(0,l.l)(m,"unstable_getServerSideProps"),P=new r.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/instagram-test",pathname:"/instagram-test",bundlePath:"",filename:""},components:{App:o(),Document:c()},userland:m});a()}catch(e){a(e)}})},8141:(e,s,t)=>{Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return c}});let a=t(5577),r=t(997),n=a._(t(6689)),l=t(5782);async function i(e){let{Component:s,ctx:t}=e;return{pageProps:await (0,l.loadGetInitialProps)(s,t)}}class c extends n.default.Component{render(){let{Component:e,pageProps:s}=this.props;return(0,r.jsx)(e,{...s})}}c.origGetInitialProps=i,c.getInitialProps=i,("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),e.exports=s.default)},4649:(e,s,t)=>{t.a(e,async(e,a)=>{try{t.d(s,{Z:()=>c});var r=t(997),n=t(6689),l=t(9648),i=e([l]);l=(i.then?(await i)():i)[0];let c=({accessToken:e})=>{let[s,t]=(0,n.useState)([]),[a,i]=(0,n.useState)(!1),[c,d]=(0,n.useState)(null),o="https://5ece8457d962.ngrok-free.app";(0,n.useEffect)(()=>{e&&m()},[e]);let m=async()=>{i(!0),d(null);try{let s=await l.default.get(`${o}/auth/instagram/user-media`,{params:{access_token:e}});s.data.success?t(s.data.data):d(s.data.message||"Failed to fetch media")}catch(e){console.error("Error fetching Instagram media:",e),d(e.response?.data?.message||"Failed to fetch Instagram media")}finally{i(!1)}};return e?a?(0,r.jsxs)("div",{className:"flex items-center justify-center p-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"}),r.jsx("span",{className:"ml-3 text-gray-600",children:"Loading Instagram media..."})]}):c?(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"text-red-400",children:r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,r.jsxs)("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),r.jsx("p",{className:"text-sm text-red-700",children:c})]})]}),r.jsx("button",{onClick:m,className:"mt-3 bg-red-100 hover:bg-red-200 text-red-800 font-medium py-2 px-4 rounded transition-colors",children:"Try Again"})]}):0===s.length?(0,r.jsxs)("div",{className:"text-center p-8 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"text-gray-400 mb-4",children:r.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"No Media Found"}),r.jsx("p",{className:"text-gray-600",children:"No Instagram posts found in your account."})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Instagram Media"}),r.jsx("button",{onClick:m,className:"bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Refresh"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:[(0,r.jsxs)("div",{className:"aspect-square relative",children:["IMAGE"===e.media_type?r.jsx("img",{src:e.media_url,alt:e.caption||"Instagram post",className:"w-full h-full object-cover"}):"VIDEO"===e.media_type?r.jsx("video",{src:e.media_url,poster:e.thumbnail_url,controls:!0,className:"w-full h-full object-cover"}):r.jsx("img",{src:e.thumbnail_url||e.media_url,alt:e.caption||"Instagram carousel",className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute top-2 right-2",children:r.jsx("span",{className:"bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded",children:e.media_type})})]}),(0,r.jsxs)("div",{className:"p-4",children:[e.caption&&r.jsx("p",{className:"text-gray-700 text-sm mb-3 line-clamp-3",children:e.caption}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[r.jsx("span",{children:new Date(e.timestamp).toLocaleDateString()}),r.jsx("a",{href:e.permalink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 font-medium",children:"View on Instagram"})]})]})]},e.id))})]}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"text-center mb-6",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Connect Your Instagram Account"}),r.jsx("p",{className:"text-gray-600",children:"Connect your Instagram account to view and manage your posts"})]}),r.jsx("button",{onClick:()=>{window.location.href=`${o}/auth/instagram`},className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 transform hover:scale-105",children:"Connect Instagram Account"})]})};a()}catch(e){a(e)}})},3777:(e,s,t)=>{t.a(e,async(e,a)=>{try{t.r(s),t.d(s,{default:()=>c});var r=t(997),n=t(6689),l=t(4649),i=e([l]);l=(i.then?(await i)():i)[0];let c=()=>{let[e,s]=(0,n.useState)(null),[t,a]=(0,n.useState)(null),i="https://5ece8457d962.ngrok-free.app";(0,n.useEffect)(()=>{let e=new URLSearchParams(window.location.search).get("access_token");e&&(s(e),c(e),window.history.replaceState({},document.title,window.location.pathname))},[]);let c=async e=>{try{let s=await fetch(`${i}/auth/instagram/profile?access_token=${e}`),t=await s.json();t.success&&a(t.data)}catch(e){console.error("Error fetching user profile:",e)}};return r.jsx("div",{className:"min-h-screen bg-gray-100 py-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Instagram Integration Test"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Test your Instagram OAuth and media fetching"})]}),e&&r.jsx("button",{onClick:()=>{s(null),a(null)},className:"bg-red-500 hover:bg-red-600 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Logout"})]}),t&&(0,r.jsxs)("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"Connected Account"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium text-green-700",children:"Username:"}),(0,r.jsxs)("p",{className:"text-green-600",children:["@",t.username]})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium text-green-700",children:"Account Type:"}),r.jsx("p",{className:"text-green-600",children:t.account_type})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium text-green-700",children:"Media Count:"}),r.jsx("p",{className:"text-green-600",children:t.media_count})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium text-green-700",children:"User ID:"}),r.jsx("p",{className:"text-green-600",children:t.id})]})]})]})]}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:r.jsx(l.Z,{accessToken:e})}),(0,r.jsxs)("div",{className:"mt-8 bg-gray-50 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Debug Information"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:"API Base URL:"}),r.jsx("span",{className:"ml-2 text-gray-600",children:i})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:"Access Token:"}),r.jsx("span",{className:"ml-2 text-gray-600",children:e?`${e.substring(0,20)}...`:"Not set"})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:"OAuth URL:"}),(0,r.jsxs)("span",{className:"ml-2 text-gray-600",children:[i,"/auth/instagram"]})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:"Callback URL:"}),(0,r.jsxs)("span",{className:"ml-2 text-gray-600",children:[i,"/auth/instagram/callback"]})]})]})]}),(0,r.jsxs)("div",{className:"mt-8 bg-blue-50 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-4",children:"Available API Endpoints"}),(0,r.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,r.jsxs)("div",{className:"flex",children:[r.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-mono mr-3",children:"GET"}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:"/auth/instagram"}),r.jsx("p",{className:"text-gray-600",children:"Initiate Instagram OAuth flow"})]})]}),(0,r.jsxs)("div",{className:"flex",children:[r.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-mono mr-3",children:"GET"}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:"/auth/instagram/callback"}),r.jsx("p",{className:"text-gray-600",children:"Handle Instagram OAuth callback"})]})]}),(0,r.jsxs)("div",{className:"flex",children:[r.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-mono mr-3",children:"GET"}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:"/auth/instagram/user-media?access_token=TOKEN"}),r.jsx("p",{className:"text-gray-600",children:"Fetch user's Instagram media"})]})]}),(0,r.jsxs)("div",{className:"flex",children:[r.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-mono mr-3",children:"GET"}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"font-medium",children:"/auth/instagram/profile?access_token=TOKEN"}),r.jsx("p",{className:"text-gray-600",children:"Fetch user's Instagram profile"})]})]})]})]})]})})};a()}catch(e){a(e)}})},5244:(e,s)=>{var t;Object.defineProperty(s,"x",{enumerable:!0,get:function(){return t}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(t||(t={}))},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},997:e=>{e.exports=require("react/jsx-runtime")},5315:e=>{e.exports=require("path")},9648:e=>{e.exports=import("axios")}};var s=require("../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[1682],()=>t(9133));module.exports=a})();