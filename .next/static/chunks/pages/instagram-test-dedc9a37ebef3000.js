(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4850],{9325:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/instagram-test",function(){return a(5938)}])},5938:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return c}});var t=a(5893),n=a(7294),l=a(6598),r=e=>{let{accessToken:s}=e,[a,r]=(0,n.useState)([]),[c,i]=(0,n.useState)(!1),[d,o]=(0,n.useState)(null),m="https://5ece8457d962.ngrok-free.app",x=(0,n.useCallback)(async()=>{i(!0),o(null);try{let e=await l.Z.get("".concat(m,"/auth/instagram/user-media"),{params:{access_token:s}});e.data.success?r(e.data.data):o(e.data.message||"Failed to fetch media")}catch(s){var e,a;console.error("Error fetching Instagram media:",s),o((null===(a=s.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.message)||"Failed to fetch Instagram media")}finally{i(!1)}},[s,m]);return((0,n.useEffect)(()=>{s&&x()},[s,x]),s)?c?(0,t.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"}),(0,t.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading Instagram media..."})]}):d?(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"text-red-400",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),(0,t.jsx)("p",{className:"text-sm text-red-700",children:d})]})]}),(0,t.jsx)("button",{onClick:x,className:"mt-3 bg-red-100 hover:bg-red-200 text-red-800 font-medium py-2 px-4 rounded transition-colors",children:"Try Again"})]}):0===a.length?(0,t.jsxs)("div",{className:"text-center p-8 bg-gray-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-gray-400 mb-4",children:(0,t.jsx)("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"No Media Found"}),(0,t.jsx)("p",{className:"text-gray-600",children:"No Instagram posts found in your account."})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Instagram Media"}),(0,t.jsx)("button",{onClick:x,className:"bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Refresh"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(e=>(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:[(0,t.jsxs)("div",{className:"aspect-square relative",children:["IMAGE"===e.media_type?(0,t.jsx)("img",{src:e.media_url,alt:e.caption||"Instagram post",className:"w-full h-full object-cover"}):"VIDEO"===e.media_type?(0,t.jsx)("video",{src:e.media_url,poster:e.thumbnail_url,controls:!0,className:"w-full h-full object-cover"}):(0,t.jsx)("img",{src:e.thumbnail_url||e.media_url,alt:e.caption||"Instagram carousel",className:"w-full h-full object-cover"}),(0,t.jsx)("div",{className:"absolute top-2 right-2",children:(0,t.jsx)("span",{className:"bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded",children:e.media_type})})]}),(0,t.jsxs)("div",{className:"p-4",children:[e.caption&&(0,t.jsx)("p",{className:"text-gray-700 text-sm mb-3 line-clamp-3",children:e.caption}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,t.jsx)("span",{children:new Date(e.timestamp).toLocaleDateString()}),(0,t.jsx)("a",{href:e.permalink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 font-medium",children:"View on Instagram"})]})]})]},e.id))})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Connect Your Instagram Account"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Connect your Instagram account to view and manage your posts"})]}),(0,t.jsx)("button",{onClick:()=>{window.location.href="".concat(m,"/auth/instagram")},className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 transform hover:scale-105",children:"Connect Instagram Account"})]})},c=()=>{let[e,s]=(0,n.useState)(null),[a,l]=(0,n.useState)(null),c="https://5ece8457d962.ngrok-free.app",i=(0,n.useCallback)(async e=>{try{let s=await fetch("".concat(c,"/auth/instagram/profile?access_token=").concat(e)),a=await s.json();a.success&&l(a.data)}catch(e){console.error("Error fetching user profile:",e)}},[c]);return(0,n.useEffect)(()=>{let e=new URLSearchParams(window.location.search).get("access_token");e&&(s(e),i(e),window.history.replaceState({},document.title,window.location.pathname))},[i]),(0,t.jsx)("div",{className:"min-h-screen bg-gray-100 py-8",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Instagram Integration Test"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Test your Instagram OAuth and media fetching"})]}),e&&(0,t.jsx)("button",{onClick:()=>{s(null),l(null)},className:"bg-red-500 hover:bg-red-600 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Logout"})]}),a&&(0,t.jsxs)("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"Connected Account"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-green-700",children:"Username:"}),(0,t.jsxs)("p",{className:"text-green-600",children:["@",a.username]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-green-700",children:"Account Type:"}),(0,t.jsx)("p",{className:"text-green-600",children:a.account_type})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-green-700",children:"Media Count:"}),(0,t.jsx)("p",{className:"text-green-600",children:a.media_count})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-green-700",children:"User ID:"}),(0,t.jsx)("p",{className:"text-green-600",children:a.id})]})]})]})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,t.jsx)(r,{accessToken:e||void 0})}),(0,t.jsxs)("div",{className:"mt-8 bg-gray-50 rounded-lg p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Debug Information"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"API Base URL:"}),(0,t.jsx)("span",{className:"ml-2 text-gray-600",children:c})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Access Token:"}),(0,t.jsx)("span",{className:"ml-2 text-gray-600",children:e?"".concat(e.substring(0,20),"..."):"Not set"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"OAuth URL:"}),(0,t.jsxs)("span",{className:"ml-2 text-gray-600",children:[c,"/auth/instagram"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Callback URL:"}),(0,t.jsxs)("span",{className:"ml-2 text-gray-600",children:[c,"/auth/instagram/callback"]})]})]})]}),(0,t.jsxs)("div",{className:"mt-8 bg-blue-50 rounded-lg p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-4",children:"Available API Endpoints"}),(0,t.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-mono mr-3",children:"GET"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"/auth/instagram"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Initiate Instagram OAuth flow"})]})]}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-mono mr-3",children:"GET"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"/auth/instagram/callback"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Handle Instagram OAuth callback"})]})]}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-mono mr-3",children:"GET"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"/auth/instagram/user-media?access_token=TOKEN"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Fetch user's Instagram media"})]})]}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-mono mr-3",children:"GET"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"/auth/instagram/profile?access_token=TOKEN"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Fetch user's Instagram profile"})]})]})]})]})]})})}}},function(e){e.O(0,[6598,2888,9774,179],function(){return e(e.s=9325)}),_N_E=e.O()}]);