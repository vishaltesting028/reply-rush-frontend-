(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4611],{5814:function(e,t,s){Promise.resolve().then(s.bind(s,8133))},8133:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var n=s(7437),a=s(2265),r=s(9376),c=s(6857),o=s(2381),i=s(9820),l=s(163),d=s(5060),u=s(7760),f=s(9205);let m=(0,f.Z)("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),h=(0,f.Z)("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),x=(0,f.Z)("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);var p=s(1671),g=s(9322),j=s(9397),b=s(3340);let v="https://5ece8457d962.ngrok-free.app";function y(){let[e,t]=(0,a.useState)([]),[s,f]=(0,a.useState)(!1),y=(0,r.useRouter)(),N=(0,r.useSearchParams)(),{toast:w}=(0,b.pm)();(0,a.useEffect)(()=>{let e=N.get("success"),t=N.get("error"),s=N.get("username");if("true"===e)w({title:"Instagram Connected!",description:"Successfully connected Instagram account: @".concat(s),variant:"default"}),C(),setTimeout(()=>C(),1e3),setTimeout(()=>C(),3e3),y.replace("/connect-account");else if(t){let e="Failed to connect Instagram account";switch(t){case"access_denied":e="Instagram access was denied";break;case"no_code":e="No authorization code received";break;case"oauth_failed":e="OAuth authentication failed";break;default:e="Instagram connection failed: ".concat(t)}w({title:"Connection Failed",description:e,variant:"destructive"}),y.replace("/connect-account")}},[N,y,w]);let k={Instagram:u.Z,Facebook:m,Twitter:h,Youtube:x},S=e=>{"Instagram"===e?window.location.href="".concat(v,"/auth/instagram"):console.log("Connecting to ".concat(e,"..."))},C=async()=>{try{console.log("\uD83D\uDD0D Checking Instagram status...");let e=await fetch("".concat(v,"/api/instagram/status"),{credentials:"include"});if(console.log("\uD83D\uDCE1 Status response:",e.status,e.ok),!e.ok){console.log("❌ Status check failed:",e.status);return}let s=await e.json();console.log("\uD83D\uDCCA Status result:",s),s.success&&s.data.isConnected?(console.log("✅ Instagram is connected! Updating UI..."),t(e=>[...e.filter(e=>"Instagram"!==e.platform),{id:"instagram-1",platform:"Instagram",username:s.data.username||"Unknown",isConnected:!0,followers:s.data.followersCount||0,lastSync:new Date(s.data.connectedAt||s.data.lastSyncAt),status:"active"}])):console.log("❌ Instagram not connected:",s.data)}catch(e){console.error("❌ Status fetch error:",e)}};(0,a.useEffect)(()=>{C()},[]);let A=async s=>{let n=e.find(e=>e.id===s);if((null==n?void 0:n.platform)==="Instagram")try{await fetch("".concat(v,"/api/instagram/disconnect"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"})}catch(e){console.error("Failed to disconnect Instagram:",e)}t(e=>e.filter(e=>e.id!==s))},T=(e,s)=>{t(t=>t.map(t=>t.id===e?{...t,isConnected:s}:t))};return(0,n.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,n.jsx)(c.Z,{}),(0,n.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,n.jsx)("header",{className:"bg-background border-b border-border px-6 py-4",children:(0,n.jsx)("div",{className:"flex items-center justify-between",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground mb-1",children:[(0,n.jsx)("span",{children:"Home"}),(0,n.jsx)("span",{children:"›"}),(0,n.jsx)("span",{children:"Connect Account"})]}),(0,n.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"Connect Account"})]})})}),(0,n.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:(0,n.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,n.jsxs)(i.Zb,{children:[(0,n.jsx)(i.Ol,{children:(0,n.jsx)(i.ll,{children:"Connected Accounts"})}),(0,n.jsx)(i.aY,{children:0===e.length?(0,n.jsxs)("div",{className:"text-center py-8",children:[(0,n.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,n.jsx)(u.Z,{className:"w-8 h-8 text-gray-400"})}),(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No accounts connected"}),(0,n.jsx)("p",{className:"text-gray-500",children:"Connect your social media accounts to get started"})]}):(0,n.jsx)("div",{className:"space-y-4",children:e.map(e=>{let t=k[e.platform];return(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center",children:(0,n.jsx)(t,{className:"w-6 h-6 text-white"})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsxs)("h4",{className:"font-medium",children:["@",e.username]}),"active"===e.status&&(0,n.jsx)(p.Z,{className:"w-4 h-4 text-green-500"}),"error"===e.status&&(0,n.jsx)(g.Z,{className:"w-4 h-4 text-red-500"})]}),(0,n.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.platform," • ",e.followers.toLocaleString()," followers"]}),(0,n.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Last synced: ",e.lastSync.toLocaleDateString()]})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(d._,{htmlFor:"toggle-".concat(e.id),className:"text-sm",children:"Active"}),(0,n.jsx)(l.r,{id:"toggle-".concat(e.id),checked:e.isConnected,onCheckedChange:t=>T(e.id,t)})]}),(0,n.jsx)(o.z,{variant:"outline",size:"sm",onClick:()=>A(e.id),children:"Disconnect"})]})]},e.id)})})})]}),(0,n.jsxs)(i.Zb,{children:[(0,n.jsx)(i.Ol,{children:(0,n.jsx)(i.ll,{children:"Available Platforms"})}),(0,n.jsx)(i.aY,{children:(0,n.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{name:"Instagram",color:"bg-gradient-to-r from-purple-500 to-pink-500"},{name:"Facebook",color:"bg-blue-600"},{name:"Twitter",color:"bg-blue-400"},{name:"Youtube",color:"bg-red-600"}].map(t=>{let s=k[t.name],a=e.some(e=>e.platform===t.name);return(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"w-16 h-16 mx-auto mb-3 ".concat(t.color," rounded-lg flex items-center justify-center"),children:(0,n.jsx)(s,{className:"w-8 h-8 text-white"})}),(0,n.jsx)("h4",{className:"font-medium mb-2",children:t.name}),(0,n.jsx)(o.z,{variant:a?"outline":"default",size:"sm",onClick:()=>S(t.name),disabled:a,className:"w-full",children:a?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),"Connected"]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.Z,{className:"w-4 h-4 mr-2"}),"Connect"]})})]},t.name)})})})]}),(0,n.jsxs)(i.Zb,{children:[(0,n.jsx)(i.Ol,{children:(0,n.jsx)(i.ll,{children:"Account Settings"})}),(0,n.jsxs)(i.aY,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium",children:"Auto-sync"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Automatically sync your account data every hour"})]}),(0,n.jsx)(l.r,{defaultChecked:!0})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium",children:"Notifications"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Get notified when there are issues with your accounts"})]}),(0,n.jsx)(l.r,{defaultChecked:!0})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium",children:"Data Backup"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Automatically backup your account data"})]}),(0,n.jsx)(l.r,{})]})]})]}),(0,n.jsxs)(i.Zb,{children:[(0,n.jsx)(i.Ol,{children:(0,n.jsx)(i.ll,{children:"Need Help?"})}),(0,n.jsx)(i.aY,{children:(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Having trouble connecting your accounts? Here are some common solutions:"}),(0,n.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-1 ml-4",children:[(0,n.jsx)("li",{children:"• Make sure you have admin access to the account"}),(0,n.jsx)("li",{children:"• Check that your account is not restricted"}),(0,n.jsx)("li",{children:"• Try disconnecting and reconnecting the account"}),(0,n.jsx)("li",{children:"• Contact support if issues persist"})]}),(0,n.jsx)(o.z,{variant:"outline",className:"mt-4",children:"Contact Support"})]})})]})]})})]})]})}},9322:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},9397:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9820:function(e,t,s){"use strict";s.d(t,{Ol:function(){return o},SZ:function(){return l},Zb:function(){return c},aY:function(){return d},ll:function(){return i}});var n=s(7437),a=s(2265),r=s(3448);let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});c.displayName="Card";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",s),...a})});o.displayName="CardHeader";let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});i.displayName="CardTitle";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",s),...a})});l.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",s),...a})});d.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},5060:function(e,t,s){"use strict";s.d(t,{_:function(){return l}});var n=s(7437),a=s(2265),r=s(6394),c=s(535),o=s(3448);let i=(0,c.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(r.Root,{ref:t,className:(0,o.cn)(i(),s),...a})});l.displayName=r.Root.displayName},163:function(e,t,s){"use strict";s.d(t,{r:function(){return w}});var n=s(7437),a=s(2265),r=s(6741),c=s(8575),o=s(3966),i=s(886),l=s(6718),d=s(420),u=s(6840),f="Switch",[m,h]=(0,o.b)(f),[x,p]=m(f),g=a.forwardRef((e,t)=>{let{__scopeSwitch:s,name:o,checked:l,defaultChecked:d,required:m,disabled:h,value:p="on",onCheckedChange:g,form:j,...b}=e,[N,w]=a.useState(null),k=(0,c.e)(t,e=>w(e)),S=a.useRef(!1),C=!N||j||!!N.closest("form"),[A,T]=(0,i.T)({prop:l,defaultProp:null!=d&&d,onChange:g,caller:f});return(0,n.jsxs)(x,{scope:s,checked:A,disabled:h,children:[(0,n.jsx)(u.WV.button,{type:"button",role:"switch","aria-checked":A,"aria-required":m,"data-state":y(A),"data-disabled":h?"":void 0,disabled:h,value:p,...b,ref:k,onClick:(0,r.M)(e.onClick,e=>{T(e=>!e),C&&(S.current=e.isPropagationStopped(),S.current||e.stopPropagation())})}),C&&(0,n.jsx)(v,{control:N,bubbles:!S.current,name:o,value:p,checked:A,required:m,disabled:h,form:j,style:{transform:"translateX(-100%)"}})]})});g.displayName=f;var j="SwitchThumb",b=a.forwardRef((e,t)=>{let{__scopeSwitch:s,...a}=e,r=p(j,s);return(0,n.jsx)(u.WV.span,{"data-state":y(r.checked),"data-disabled":r.disabled?"":void 0,...a,ref:t})});b.displayName=j;var v=a.forwardRef((e,t)=>{let{__scopeSwitch:s,control:r,checked:o,bubbles:i=!0,...u}=e,f=a.useRef(null),m=(0,c.e)(f,t),h=(0,l.D)(o),x=(0,d.t)(r);return a.useEffect(()=>{let e=f.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(h!==o&&t){let s=new Event("click",{bubbles:i});t.call(e,o),e.dispatchEvent(s)}},[h,o,i]),(0,n.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o,...u,tabIndex:-1,ref:m,style:{...u.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function y(e){return e?"checked":"unchecked"}v.displayName="SwitchBubbleInput";var N=s(3448);let w=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)(g,{className:(0,N.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...a,ref:t,children:(0,n.jsx)(b,{className:(0,N.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});w.displayName=g.displayName},3340:function(e,t,s){"use strict";s.d(t,{pm:function(){return f}});var n=s(2265);let a=0,r=new Map,c=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?c(s):e.toasts.forEach(e=>{c(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],l={toasts:[]};function d(e){l=o(l,e),i.forEach(e=>{e(l)})}function u(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||n()}}}),{id:s,dismiss:n,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function f(){let[e,t]=n.useState(l);return n.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},6394:function(e,t,s){"use strict";s.d(t,{Root:function(){return o}});var n=s(2265),a=s(6840),r=s(7437),c=n.forwardRef((e,t)=>(0,r.jsx)(a.WV.label,{...e,ref:t,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||(null===(s=e.onMouseDown)||void 0===s||s.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));c.displayName="Label";var o=c},6718:function(e,t,s){"use strict";s.d(t,{D:function(){return a}});var n=s(2265);function a(e){let t=n.useRef({value:e,previous:e});return n.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}},420:function(e,t,s){"use strict";s.d(t,{t:function(){return r}});var n=s(2265),a=s(1188);function r(e){let[t,s]=n.useState(void 0);return(0,a.b)(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let n,a;if(!Array.isArray(t)||!t.length)return;let r=t[0];if("borderBoxSize"in r){let e=r.borderBoxSize,t=Array.isArray(e)?e[0]:e;n=t.inlineSize,a=t.blockSize}else n=e.offsetWidth,a=e.offsetHeight;s({width:n,height:a})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}s(void 0)},[e]),t}}},function(e){e.O(0,[622,6264,6857,2971,2117,1744],function(){return e(e.s=5814)}),_N_E=e.O()}]);